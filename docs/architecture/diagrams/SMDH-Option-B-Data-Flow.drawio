<mxfile host="app.diagrams.net">
  <diagram name="Option B - Data Flow Detailed" id="dataflow">
    <mxGraphModel dx="1434" dy="790" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="SMDH Option B: Detailed Data Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="304" y="20" width="560" height="40" as="geometry"/>
        </mxCell>

        <!-- Real-time Sensor Flow -->
        <mxCell id="realtime-flow" value="Real-time Sensor Data Flow" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="1080" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="rt-sensor" value="Sensors&#xa;1 Hz" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="realtime-flow">
          <mxGeometry x="20" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-iot" value="IoT Core&#xa;MQTT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="realtime-flow">
          <mxGeometry x="150" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-kinesis" value="Kinesis&#xa;Buffer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="realtime-flow">
          <mxGeometry x="280" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-snowpipe" value="Snowpipe&#xa;Streaming&#xa;&lt;10s" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=1" vertex="1" parent="realtime-flow">
          <mxGeometry x="410" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-raw" value="Raw Table&#xa;VARIANT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="realtime-flow">
          <mxGeometry x="540" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-stream" value="Stream&#xa;CDC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="realtime-flow">
          <mxGeometry x="670" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-task" value="Task&#xa;Validate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="realtime-flow">
          <mxGeometry x="800" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-dynamic" value="Dynamic&#xa;Tables&#xa;1 min lag" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=1" vertex="1" parent="realtime-flow">
          <mxGeometry x="930" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="rt-latency" value="Total Latency: 10-60 seconds end-to-end" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontStyle=1" vertex="1" parent="realtime-flow">
          <mxGeometry x="20" y="130" width="1010" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrows for real-time flow -->
        <mxCell id="rt-arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00796B;" edge="1" parent="realtime-flow" source="rt-sensor" target="rt-iot">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rt-arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00796B;" edge="1" parent="realtime-flow" source="rt-iot" target="rt-kinesis">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rt-arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#0D47A1;" edge="1" parent="realtime-flow" source="rt-kinesis" target="rt-snowpipe">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rt-arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="realtime-flow" source="rt-snowpipe" target="rt-raw">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rt-arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="realtime-flow" source="rt-raw" target="rt-stream">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rt-arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="realtime-flow" source="rt-stream" target="rt-task">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="rt-arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="realtime-flow" source="rt-task" target="rt-dynamic">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- RFID Event-driven Flow -->
        <mxCell id="event-flow" value="RFID Job Tracking Flow (Event-driven)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="300" width="1080" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="ev-scanner" value="RFID&#xa;Scanner&#xa;Event" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="event-flow">
          <mxGeometry x="20" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-api" value="API&#xa;Gateway&#xa;REST" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="event-flow">
          <mxGeometry x="150" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-external-fn" value="External&#xa;Function&#xa;(Lambda)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="event-flow">
          <mxGeometry x="280" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-table" value="Job&#xa;Tracking&#xa;Table" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=1" vertex="1" parent="event-flow">
          <mxGeometry x="410" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-stream" value="Stream&#xa;CDC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="event-flow">
          <mxGeometry x="540" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-task" value="Task&#xa;Session&#xa;Window" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="event-flow">
          <mxGeometry x="670" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-flow-analysis" value="Production&#xa;Flow&#xa;Dynamic Tbl" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=1" vertex="1" parent="event-flow">
          <mxGeometry x="800" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-dashboard" value="Job&#xa;Analytics&#xa;Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;" vertex="1" parent="event-flow">
          <mxGeometry x="930" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="ev-latency" value="Total Latency: 5-30 seconds for analytics refresh" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontStyle=1" vertex="1" parent="event-flow">
          <mxGeometry x="20" y="130" width="1010" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrows for event flow -->
        <mxCell id="ev-arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D84315;" edge="1" parent="event-flow" source="ev-scanner" target="ev-api">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ev-arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D84315;" edge="1" parent="event-flow" source="ev-api" target="ev-external-fn">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ev-arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#0D47A1;" edge="1" parent="event-flow" source="ev-external-fn" target="ev-table">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ev-arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="event-flow" source="ev-table" target="ev-stream">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ev-arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="event-flow" source="ev-stream" target="ev-task">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ev-arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="event-flow" source="ev-task" target="ev-flow-analysis">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="ev-arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6A1B9A;" edge="1" parent="event-flow" source="ev-flow-analysis" target="ev-dashboard">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Batch File Upload Flow -->
        <mxCell id="batch-flow" value="Batch File Upload Flow" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="520" width="1080" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="batch-user" value="User&#xa;Upload&#xa;CSV/Excel" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="batch-flow">
          <mxGeometry x="20" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-portal" value="Web&#xa;Portal" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;" vertex="1" parent="batch-flow">
          <mxGeometry x="150" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-stage" value="Snowflake&#xa;Stage&#xa;PUT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=1" vertex="1" parent="batch-flow">
          <mxGeometry x="280" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-snowpipe" value="Snowpipe&#xa;Auto&#xa;Ingest" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;fontStyle=1" vertex="1" parent="batch-flow">
          <mxGeometry x="410" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-staging" value="Staging&#xa;Table" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="batch-flow">
          <mxGeometry x="540" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-proc" value="Stored&#xa;Proc&#xa;Validate" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="batch-flow">
          <mxGeometry x="670" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-final" value="Final&#xa;Table" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="batch-flow">
          <mxGeometry x="800" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-notify" value="User&#xa;Notification&#xa;Complete" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6d0de;strokeColor=#996185;" vertex="1" parent="batch-flow">
          <mxGeometry x="930" y="40" width="100" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="batch-latency" value="Total Time: 1-5 minutes (no S3 intermediate storage)" style="text;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontStyle=1" vertex="1" parent="batch-flow">
          <mxGeometry x="20" y="130" width="1010" height="30" as="geometry"/>
        </mxCell>

        <!-- Arrows for batch flow -->
        <mxCell id="batch-arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6A1B9A;" edge="1" parent="batch-flow" source="batch-user" target="batch-portal">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="batch-arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#0D47A1;" edge="1" parent="batch-flow" source="batch-portal" target="batch-stage">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="batch-arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="batch-flow" source="batch-stage" target="batch-snowpipe">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="batch-arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="batch-flow" source="batch-snowpipe" target="batch-staging">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="batch-arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="batch-flow" source="batch-staging" target="batch-proc">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="batch-arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="batch-flow" source="batch-proc" target="batch-final">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="batch-arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#6A1B9A;" edge="1" parent="batch-flow" source="batch-final" target="batch-notify">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Comparison Note -->
        <mxCell id="comparison" value="Key Simplifications vs Option A" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="40" y="740" width="1080" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="comp1" value="❌ No Lambda transformations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="comparison">
          <mxGeometry x="10" y="30" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp2" value="❌ No Kinesis Firehose" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="comparison">
          <mxGeometry x="270" y="30" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp3" value="❌ No EMR/Flink processing" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="comparison">
          <mxGeometry x="530" y="30" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp4" value="❌ No S3 data lake (minimal archive)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="comparison">
          <mxGeometry x="790" y="30" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp5" value="✅ All processing in Snowflake" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="comparison">
          <mxGeometry x="10" y="50" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp6" value="✅ SQL-first development" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="comparison">
          <mxGeometry x="270" y="50" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp7" value="✅ Unified data governance" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="comparison">
          <mxGeometry x="530" y="50" width="250" height="20" as="geometry"/>
        </mxCell>

        <mxCell id="comp8" value="✅ 15-20% cost savings" style="text;html=1;strokeColor=none;fillColor=#d5e8d4;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="comparison">
          <mxGeometry x="790" y="50" width="250" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
